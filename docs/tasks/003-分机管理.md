# 003-分机管理 Develop Task

**状态**: Draft

---

**要实现的功能**
实现分机的配置管理、状态监控、自主呼出呼入功能

**技术栈**
- 框架: Spring Boot 3.x
- 数据库: PostgreSQL
- API: RESTful
- 通信: FreeSWITCH ESL

---

## 子任务

- [ ] 设计分机数据模型
  - 分机号、密码
  - 分机类型（SIP、软电话）
  - 状态（在线、离线、注册中、空闲、占用）

- [ ] 实现分机 CRUD API
  - 创建分机
  - 查询分机列表
  - 更新分机配置
  - 删除分机

- [ ] 实现分机状态监控
  - 监听 FreeSWITCH 注册事件
  - 实时更新分机状态
  - 提供分机状态查询接口

- [ ] 实现分机自主呼出
  - 分机发起外呼 API
  - 监听外呼结果
  - 更新通话状态

- [ ] 编写分机管理测试用例
  测试: mvn test -Dtest=ExtensionControllerTest

---

## 任务目标

- [ ] API: POST /api/extensions - 创建分机成功
- [ ] API: GET /api/extensions - 查询分机列表成功
- [ ] API: PUT /api/extensions/{id} - 更新分机成功
- [ ] API: DELETE /api/extensions/{id} - 删除分机成功
- [ ] API: GET /api/extensions/{id}/status - 查询分机状态成功
- [ ] API: POST /api/extensions/{id}/dial - 分机发起外呼成功
- [ ] 分机能正常呼入呼出

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
